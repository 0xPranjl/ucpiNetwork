make --dry-run --always-make --keep-going --print-directory
make: Entering directory '/workspace/SecretNetwork'
 
cargo vendor third_party/vendor --manifest-path third_party/build/Cargo.toml
BUILD_PROFILE=release FEATURES= FEATURES_U= make -C go-cosmwasm build-rust
 
make[1]: Entering directory '/workspace/SecretNetwork/go-cosmwasm'
 
FEATURES="" make -C ../cosmwasm/enclaves/execute enclave
 
make[2]: Entering directory '/workspace/SecretNetwork/cosmwasm/enclaves/execute'
 
cd ../ffi-types && cargo check --features "build_headers"
cp ../target/headers/enclave-ffi-types.h ./
 
mkdir ./lib
 
RUST_TARGET_PATH=/workspace/SecretNetwork/cosmwasm/enclaves/execute/../xargo RUSTFLAGS="-Z force-unstable-if-unmarked" xargo build --features "SGX_MODE_SW" --target x86_64-unknown-linux-sgx -Z unstable-options --profile release --locked
cp ../target/x86_64-unknown-linux-sgx/release/libsecret_enclave.a ./lib/libenclave.a
sgx_edger8r --trusted Enclave.edl --search-path /opt/sgxsdk/include --search-path ../../../third_party/vendor/sgx_edl/edl --trusted-dir ./
 
sgx_edger8r --trusted Enclave.edl --search-path /opt/sgxsdk/include --search-path ../../../third_party/vendor/sgx_edl/edl --trusted-dir ./
cc -m64 -O2 -fstack-protector -ffreestanding -nostdinc -fvisibility=hidden -fpie -fno-strict-overflow -fno-delete-null-pointer-checks   -I../../../third_party/vendor/sgx_edl/common/inc -I../../../third_party/vendor/sgx_edl/edl -I/opt/sgxsdk/include -I/opt/sgxsdk/include/tlibc -I/opt/sgxsdk/include/stlport -I/opt/sgxsdk/include/epid -I./ -I./include -c Enclave_t.c -o Enclave_t.o
g++ Enclave_t.o -o librust_cosmwasm_enclave.so -Wl,--no-undefined -nostdlib -nodefaultlibs -nostartfiles -L/opt/sgxsdk/lib64 -Wl,--whole-archive -lsgx_trts_sim -Wl,--no-whole-archive -Wl,--start-group -lsgx_tstdc -lsgx_tcxx -lsgx_tcrypto -lsgx_tservice_sim -lsgx_tprotected_fs -L./lib -lenclave -Wl,--end-group -Wl,--version-script=Enclave.lds -Wl,-z,relro,-z,now,-z,noexecstack -Wl,-Bstatic -Wl,-Bsymbolic -Wl,--no-undefined -Wl,-pie,-eenclave_entry -Wl,--export-dynamic -Wl,--gc-sections -Wl,--defsym,__ImageBase=0
sgx_sign sign -key Enclave_private.pem -enclave librust_cosmwasm_enclave.so -out librust_cosmwasm_enclave.signed.so -config Enclave.config.xml
make[2]: Leaving directory '/workspace/SecretNetwork/cosmwasm/enclaves/execute'
 
cp ../cosmwasm/enclaves/execute/librust_cosmwasm_enclave.signed.so ./
 
make[1]: *** No rule to make target '../cosmwasm/enclaves/target/headers/enclave-ffi-types.h', needed by 'enclave-ffi-types.h'.

FEATURES="" make -C ../cosmwasm/enclaves/query enclave
 
make[2]: Entering directory '/workspace/SecretNetwork/cosmwasm/enclaves/query'
 
cd ../ffi-types && cargo check --features "build_headers"
cp ../target/headers/enclave-ffi-types.h ./
mkdir ./lib
 
RUST_TARGET_PATH=/workspace/SecretNetwork/cosmwasm/enclaves/query/../xargo RUSTFLAGS="-Z force-unstable-if-unmarked" xargo build --features "SGX_MODE_SW" --target x86_64-unknown-linux-sgx -Z unstable-options --profile release --locked
cp ../target/x86_64-unknown-linux-sgx/release/libsecret_query_enclave.a ./lib/libenclave.a
sgx_edger8r --trusted Enclave.edl --search-path /opt/sgxsdk/include --search-path ../../../third_party/vendor/sgx_edl/edl --trusted-dir ./
sgx_edger8r --trusted Enclave.edl --search-path /opt/sgxsdk/include --search-path ../../../third_party/vendor/sgx_edl/edl --trusted-dir ./
cc -m64 -O2 -fstack-protector -ffreestanding -nostdinc -fvisibility=hidden -fpie -fno-strict-overflow -fno-delete-null-pointer-checks   -I../../../third_party/vendor/sgx_edl/common/inc -I../../../third_party/vendor/sgx_edl/edl -I/opt/sgxsdk/include -I/opt/sgxsdk/include/tlibc -I/opt/sgxsdk/include/stlport -I/opt/sgxsdk/include/epid -I./ -I./include -c Enclave_t.c -o Enclave_t.o
g++ Enclave_t.o -o librust_cosmwasm_query_enclave.so -Wl,--no-undefined -nostdlib -nodefaultlibs -nostartfiles -L/opt/sgxsdk/lib64 -Wl,--whole-archive -lsgx_trts_sim -Wl,--no-whole-archive -Wl,--start-group -lsgx_tstdc -lsgx_tcxx -lsgx_tcrypto -lsgx_tservice_sim -lsgx_tprotected_fs -L./lib -lenclave -Wl,--end-group -Wl,--version-script=Enclave.lds -Wl,-z,relro,-z,now,-z,noexecstack -Wl,-Bstatic -Wl,-Bsymbolic -Wl,--no-undefined -Wl,-pie,-eenclave_entry -Wl,--export-dynamic -Wl,--gc-sections -Wl,--defsym,__ImageBase=0
 
sgx_sign sign -key Enclave_private.pem -enclave librust_cosmwasm_query_enclave.so -out librust_cosmwasm_query_enclave.signed.so -config Enclave.config.xml
make[2]: Leaving directory '/workspace/SecretNetwork/cosmwasm/enclaves/query'
 
cp ../cosmwasm/enclaves/query/librust_cosmwasm_query_enclave.signed.so ./
 
make[1]: Leaving directory '/workspace/SecretNetwork/go-cosmwasm'
 
make: *** [Makefile:144: _build-linux] Error 2

cd ./cmd/secretd && go-bindata -o ias_bin_sw.go -prefix "../../ias_keys/sw_dummy/" -tags "!hw" ../../ias_keys/sw_dummy/...
cp go-cosmwasm/target/release/libgo_cosmwasm.so go-cosmwasm/api
go build -mod=readonly -tags "netgo ledger sw" -ldflags '-X github.com/cosmos/cosmos-sdk/version.Name=SecretNetwork -X github.com/cosmos/cosmos-sdk/version.AppName=secretd -X github.com/enigmampc/SecretNetwork/cmd/secretcli/version.ClientName=secretcli -X github.com/cosmos/cosmos-sdk/version.Version=1.3.1-282-g0d3dd002 -X github.com/cosmos/cosmos-sdk/version.Commit=0d3dd002d655baed72364862f32342d93a736d14 -X "github.com/cosmos/cosmos-sdk/version.BuildTags=netgo ledger sw" -s -w' ./cmd/secretd
go build -o secretcli -mod=readonly -tags "netgo ledger sw secretcli" -ldflags '-X github.com/cosmos/cosmos-sdk/version.Name=SecretNetwork -X github.com/cosmos/cosmos-sdk/version.AppName=secretd -X github.com/enigmampc/SecretNetwork/cmd/secretcli/version.ClientName=secretcli -X github.com/cosmos/cosmos-sdk/version.Version=1.3.1-282-g0d3dd002 -X github.com/cosmos/cosmos-sdk/version.Commit=0d3dd002d655baed72364862f32342d93a736d14 -X "github.com/cosmos/cosmos-sdk/version.BuildTags=netgo ledger sw" -s -w' ./cmd/secretd
make xgo_build_secretcli XGO_TARGET=windows/amd64
 
make[1]: Entering directory '/workspace/SecretNetwork'
 
echo "--> Ensure dependencies have not been modified"
GO111MODULE=on go mod verify
echo "--> WARNING! This builds from origin/cosmwasm-v1-lint!"
xgo --targets windows/amd64 -tags="netgo ledger sw secretcli" -ldflags '-X github.com/cosmos/cosmos-sdk/version.Name=SecretNetwork -X github.com/cosmos/cosmos-sdk/version.AppName=secretd -X github.com/enigmampc/SecretNetwork/cmd/secretcli/version.ClientName=secretcli -X github.com/cosmos/cosmos-sdk/version.Version=1.3.1-282-g0d3dd002 -X github.com/cosmos/cosmos-sdk/version.Commit=0d3dd002d655baed72364862f32342d93a736d14 -X "github.com/cosmos/cosmos-sdk/version.BuildTags=netgo ledger sw" -s -w' --branch cosmwasm-v1-lint github.com/enigmampc/SecretNetwork/cmd/secretd
make[1]: Leaving directory '/workspace/SecretNetwork'
 
mv secretd-windows-* secretcli-windows-amd64.exe
make xgo_build_secretcli XGO_TARGET=darwin/amd64
 
make[1]: Entering directory '/workspace/SecretNetwork'
 
echo "--> Ensure dependencies have not been modified"
GO111MODULE=on go mod verify
echo "--> WARNING! This builds from origin/cosmwasm-v1-lint!"
xgo --targets darwin/amd64 -tags="netgo ledger sw secretcli" -ldflags '-X github.com/cosmos/cosmos-sdk/version.Name=SecretNetwork -X github.com/cosmos/cosmos-sdk/version.AppName=secretd -X github.com/enigmampc/SecretNetwork/cmd/secretcli/version.ClientName=secretcli -X github.com/cosmos/cosmos-sdk/version.Version=1.3.1-282-g0d3dd002 -X github.com/cosmos/cosmos-sdk/version.Commit=0d3dd002d655baed72364862f32342d93a736d14 -X "github.com/cosmos/cosmos-sdk/version.BuildTags=netgo ledger sw" -s -w' --branch cosmwasm-v1-lint github.com/enigmampc/SecretNetwork/cmd/secretd
make[1]: Leaving directory '/workspace/SecretNetwork'
 
mv secretd-darwin-* secretcli-macos-amd64
 
make xgo_build_secretcli XGO_TARGET=linux/arm64
 
make[1]: Entering directory '/workspace/SecretNetwork'
 
echo "--> Ensure dependencies have not been modified"
GO111MODULE=on go mod verify
echo "--> WARNING! This builds from origin/cosmwasm-v1-lint!"
xgo --targets linux/arm64 -tags="netgo ledger sw secretcli" -ldflags '-X github.com/cosmos/cosmos-sdk/version.Name=SecretNetwork -X github.com/cosmos/cosmos-sdk/version.AppName=secretd -X github.com/enigmampc/SecretNetwork/cmd/secretcli/version.ClientName=secretcli -X github.com/cosmos/cosmos-sdk/version.Version=1.3.1-282-g0d3dd002 -X github.com/cosmos/cosmos-sdk/version.Commit=0d3dd002d655baed72364862f32342d93a736d14 -X "github.com/cosmos/cosmos-sdk/version.BuildTags=netgo ledger sw" -s -w' --branch cosmwasm-v1-lint github.com/enigmampc/SecretNetwork/cmd/secretd
 
make[1]: Leaving directory '/workspace/SecretNetwork'
mv secretd-linux-arm64 secretcli-linux-arm64
 
make: Leaving directory '/workspace/SecretNetwork'
 
